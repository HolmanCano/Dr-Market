<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Producto | Dr-Market</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/landing-theme.css">
  </head>
  <body>
    <header>
      <div class="container nav">
        <div class="brand">
          <div class="brand-logo" aria-hidden="true"></div>
          <span>Dr'Market</span>
        </div>
        <nav class="nav-actions" aria-label="Principal">
          <a class="btn" href="landing.html#inicio">Inicio</a>
          <a class="btn" href="index.html">Tienda</a>
          <a class="btn" href="nosotros.html">Nosotros</a>
          <a class="btn" href="carrito.html" aria-label="Carrito">ðŸ›’ <span id="cart-count" aria-live="polite">0</span></a>
        </nav>
      </div>
    </header>

    <main>
      <section class="surface-block">
        <div class="product-detail">
          <figure>
            <img id="product-image" src="img/modelo-3.svg" alt="Producto seleccionado">
          </figure>
          <div>
            <h1 id="product-name" class="section-title">Producto</h1>
            <p class="section-sub">Camiseta unisex 100&nbsp;% algod&oacute;n org&aacute;nico con estampado premium.</p>
            <div class="price" id="product-price">25&nbsp;&euro;</div>
            <div class="badges">
              <span class="badge">Corte unisex</span>
              <span class="badge">Edici&oacute;n 2024</span>
              <span class="badge">Tintas libres de ftalatos</span>
            </div>
            <form class="form" action="#" method="post">
              <label for="talla">Selecciona talla</label>
              <select id="talla" name="talla" required>
                <option value="" selected disabled>Elige una opci&oacute;n</option>
                <option value="s">Small</option>
                <option value="m">Medium</option>
                <option value="l">Large</option>
                <option value="xl">XL</option>
              </select>
              <label for="cantidad">Cantidad</label>
              <input id="cantidad" name="cantidad" type="number" min="1" value="1" required>
              <button type="submit">Agregar al carrito</button>
            </form>
          </div>
        </div>
      </section>

      <section class="surface-block compact">
        <h2 class="section-title">Detalles t&eacute;cnicos</h2>
        <div class="features">
          <div class="feature">
            <div class="icon">TELA</div>
            <div>
              <h4>Algod&oacute;n ultrafino</h4>
              <p>180 g/m&sup2; peinado, ideal para climas templados.</p>
            </div>
          </div>
          <div class="feature">
            <div class="icon">COLOR</div>
            <div>
              <h4>Azul profundo</h4>
              <p>Te&ntilde;ido reactivo que preserva la intensidad tras cada lavado.</p>
            </div>
          </div>
          <div class="feature">
            <div class="icon">CUIDO</div>
            <div>
              <h4>Mantenimiento sencillo</h4>
              <p>Lavar en fr&iacute;o, secar a la sombra y planchar del rev&eacute;s para conservar el estampado.</p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="footer-inner">
        <div class="footer-brand">
          <div class="footer-logo" aria-hidden="true"></div>
          <span>Dr'Market</span>
        </div>
        <p>&copy; 2024 Dr'Market. Todos los derechos reservados.</p>
        <a href="mailto:hola@drmarket.com">hola@drmarket.com</a>
      </div>
    </footer>
  </body>
  <script src="js/cart.js"></script>
  <script>
    (function(){
      const form = document.querySelector('.form');
      if (!form) return;
      // Datos desde URL
      const params = window.cartManager.parseUrlParams();
      if (params.name) { const n = document.getElementById('product-name'); if (n) n.textContent = params.name; }
      if (typeof params.price === 'number') { const p = document.getElementById('product-price'); if (p) p.innerHTML = `${params.price.toFixed(2)}&nbsp;â‚¬`; }
      if (params.image) { const img = document.getElementById('product-image'); if (img) img.setAttribute('src', params.image); }

      form.addEventListener('submit', (e)=>{
        e.preventDefault();
        const name = document.getElementById('product-name')?.textContent?.trim() || 'Producto';
        const priceText = document.getElementById('product-price')?.textContent || '0';
        const match = priceText.replace(/\s/g,'').match(/([0-9]+(?:[\.,][0-9]+)?)/);
        const price = match ? Number(match[1].replace(',','.')) : 0;
        const quantity = Math.max(1, Number(document.getElementById('cantidad')?.value || 1));
        const size = document.getElementById('talla')?.value || '';
        const image = document.getElementById('product-image')?.getAttribute('src') || '';

        window.cartManager.addItem({ name, price, quantity, size, image });
        window.location.href = 'carrito.html';
      });
    })();
  </script>
</html>
